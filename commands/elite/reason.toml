# Copyright 2025 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

description = "‚öñÔ∏è REASON: Forces a pause for First-Principles analysis."
prompt = """
‚öñÔ∏è **TRIGGER ACTIVATED: REASONING MODE** ‚öñÔ∏è

You have been invoked with the `/elite:reason` command.

**IMMEDIATE ACTIONS REQUIRED:**
1.  **PAUSE** the current execution plan.
2.  **ENTER STATE:** `Strategy`.
3.  **MANDATORY TOOLING:** Use `sequentialthinking` to perform a deep, first-principles analysis of the current objective.
    *   **Abductive Reasoning:** Generate at least two competing hypotheses to explain the current situation.
    *   **Root Cause Analysis:** If debugging, identify the fundamental reason for the failure.
    *   **Strategic Divergence:** Propose one radically different approach to the problem.
4.  **ARTICULATE:** Present your complete analysis in the `<reflection>` block of the `ELITE OPERATIONAL STATE` dashboard.
5.  **PROPOSE:** Formulate a new, refined `TASK QUEUE` based on your findings.
"""
example = """
# üß† ELITE OPERATIONAL STATE
**Goal:** Fix failing unit test `test_user_creation`.
**State:** Strategy
**Confidence:** 85%

<reflection>
*   **Hypothesis 1 (Most Likely):** The test fails due to a race condition. The asynchronous database call to create the user doesn't complete before the assertion is made.
*   **Hypothesis 2 (Less Likely):** The test setup is incorrect, and the mock database is not being injected properly.
*   **Strategic Divergence:** Instead of fixing the unit test, we could write a higher-level integration test that uses a real test database, which would be less prone to race conditions.
*   **Analysis:** `sequentialthinking` output shows that Hypothesis 1 is the most probable. The test code lacks an `await` on the `createUser` function call.
</reflection>

## üßê PLAN
*   **Strategy:** I will add the missing `await` keyword to the test file to resolve the race condition.

## üìã TASK QUEUE
*   [ ] **Phase 1: Execution**
    *   [ ] `replace` in `tests/user.test.js` to add `await` before `createUser()`. ([DESTRUCTIVE])
*   [ ] **Phase 2: Reflection**
    *   [ ] `run_shell_command` "npm test tests/user.test.js" ([SAFE])
"""
